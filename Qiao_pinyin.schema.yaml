# Rime schema
# encoding: utf-8

schema:
  schema_id: Qiao_pinyin
  name: QIaoã®æ‹¼éŸ³
  version: "1.0.0"
  author: Qiao
  description: |
    å‚è€ƒå››å¶è‰æ–¹æ¡ˆã€æœ™æœˆç®€ä½“æ‹¼éŸ³ï¼Œç”±Qiaoå®šåˆ¶
    ç‰¹ç‚¹ï¼š
      1. ç»“åˆæœç‹—è¾“å…¥æ³•çš„è¾“å…¥ä¹ æƒ¯
      2. é»˜è®¤å¼€å¯ emoji è¡¨æƒ…æ”¯æŒ
      3. åŠ ä¸Šå¾ˆå¤šç‰¹æ®Šç¬¦å·çš„è¾“å…¥æ”¯æŒ
      4. ç¹ç®€åˆ‡æ¢æ”¯æŒ
      5. è®¸å¤šæ™ºèƒ½çº é”™
  dependencies:  # å¦‚æœæœ¬æ–¹æ¡ˆä¾è³´æ–¼å…¶å®ƒæ–¹æ¡ˆã€”é€šå¸¸ä¾†èªªæœƒä¾é ¼å…¶å®ƒæ–¹æ¡ˆåšçˆ²åæŸ¥ï¼ŒæŠ‘æˆ–æ˜¯å…©ç¨®æˆ–å¤šç¨®æ–¹æ¡ˆæ··ç”¨æ™‚ã€•
    - core
    # - easy_en

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­, è‹± ]
  - name: zh_simp
    reset: 1
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: full_shape
    reset: 0
    states: [ åŠ, å…¨ ]
  - name: emoji_suggestion
    reset: 1
    states: [ "ğŸ˜­ï¸", "ğŸ˜„ï¸" ]
  - name: symbol_support
    reset: 1
    states: [ "æ— ç¬¦", "ç¬¦" ]
  - name: ascii_punct
    reset: 0
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: extended_char             # luaç²¾å‡†è¿‡æ»¤ç”Ÿåƒ»å­—ï¼Œæ§åˆ¶å¼€å…³
    reset: 1                        #é»˜è®¤1ï¼Œå¸¸ç”¨
    states: ["è¶…é›†", "å¸¸ç”¨"]
  - name: English             # ç®€å•çš„Englishäº’è¯‘æ»¤é•œ
    reset: 0                        #é»˜è®¤1ï¼Œå¸¸ç”¨
    states: ["EN_å…³", "EN_å¼€"]

engine:
  processors:
    - ascii_composer
    - recognizer  # ç¼ºå°‘è¿™ä¸ªä¼šå¯¼è‡´luaè®¡ç®—å™¨æ— æ³•ä½¿ç”¨
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
    # - lua_processor@select_character_processor  # æ·»åŠ  ä»¥è¯å®šå¥
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - script_translator
    # - echo_translator       # æ²¡æœ‰å€™é€‰é¡¹æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªä¸ç¼–ç ä¸²ä¸€ä¸ªæ¨¡æ ·çš„å€™é€‰é¡¹
    - lua_translator@date_translator         # æ·»åŠ  è°ƒç”¨Rime-luaæ’ä»¶ï¼Œè‡ªå®šä¹‰ç³»ç»Ÿå˜é‡è¾“å‡ºæ—¥æœŸã€æ˜ŸæœŸã€æ—¶é—´ç±»å‹è¾“å‡º
    - lua_translator@calculator_translator   # æ·»åŠ  ç®€æ˜“è®¡ç®—å™¨luaï¼ŒæŒ‰ç¬¦å·"="æ¿€æ´»è®¡ç®—å™¨
    - table_translator@custom_phrase         # æ·»åŠ  è°ƒç”¨custom_phraseè‡ªå®šä¹‰çŸ­è¯­
    # - table_translator@easy_english          # è½½å…¥ç¿»è¯‘è‹±æ–‡çš„ç è¡¨ç¿»è¯‘å™¨ï¼Œå–åä¸º easy_english
  filters:
    - lua_filter@core  #luaç²¾å‡†è¿‡æ»¤ï¼Œå¿…é¡»æ”¾åˆ°engine/filters:æ»¤é•œç¬¬ä¸€è¡Œ
    - simplifier
    - uniquifier
    - simplifier@emoji_suggestion   #emoji
    - simplifier@symbol_support
    # - simplifier@English  # æ·»åŠ  ç®€å•çš„Englishäº’è¯‘æ»¤é•œ

  # å¢åŠ å…«è‚¡æ–‡çš„ã€ç®€åŒ–å­—ã€‘è¯­è¨€æ¨¡å‹ï¼Œä¼˜åŒ–é•¿å¥è¾“å…¥
  grammar/language: zh-hans-t-essay-bgw  

## èª¿ç”¨ä¸­è‹±æ··è¼¸è©å…¸
chinese_contain_english:
  dictionary: chinese_contain_english

# è‡ªå®šä¹‰çŸ­è¯­ Custom_phrase.txt # Tab ä¸èƒ½ç”¨ç©ºæ ¼ä»£æ›¿
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase     #è®¾å®šç”¨æˆ·è¯å…¸å
  db_class: stabledb           #è®¾å®šç”¨æˆ·è¯å…¸ç±»å‹ï¼Œå¯è®¾ tabledbã€”æ–‡æœ¬ã€•æˆ– userdbã€”äºŒè¿›åˆ¶ã€•
  enable_completion: false     #æå‰æ˜¾ç¤ºå°šæœªè¾“å…¥å®Œæ•´ç çš„å­—ã€”true æˆ– falseã€•
  enable_sentence: false       #æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥ã€”true æˆ– falseã€•
  initial_quality: 1           #è®¾å®šæ­¤ç¿»è¯‘å™¨ç»“æœä¼˜å…ˆçº§ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰çš„è¯æ’åœ¨å‰é¢ï¼Œè¿™ä¸ªå€¼å°½é‡è®¾å¤§ä¸€ç‚¹

# easy_en è‹±æ–‡çš„ç è¡¨ç¿»è¯‘å™¨  æ³¨æ„ï¼šä¸­è‹±æ–‡ç»„åˆè¯æ±‡è¦åŠ åœ¨è‹±æ–‡æ–¹æ¡ˆ
# easy_english:
#   dictionary: easy_en
#   spelling_hints: 9
#   enable_completion: false      # æ˜¯å¦å¯ç”¨è‹±æ–‡è¾“å…¥è”æƒ³è¡¥å…¨ï¼ˆç¼–ç æç¤ºï¼‰
#   enable_sentence: false        # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥ã€”true æˆ– falseã€•
#   initial_quality: 0            # è°ƒæ•´è‹±æ–‡å€™é€‰è¯çš„ä½ç½®ï¼Œeasy_en å¯¹æ­¤é¡¹çš„é»˜è®¤è®¾ç½®ä¸º -1ï¼Œä½ å¯ä»¥å°è¯• 0 åˆ° 0.5 å·¦å³çš„æ•°å€¼ã€‚æ•°å€¼è¶Šå¤§ï¼Œè‹±æ–‡å•è¯å‡ºç°çš„å°±è¶Šé å‰ã€‚

#ç®€å•çš„Englishäº’è¯‘æ»¤é•œ
English:
  opencc_config: English.json
  option_name: English
  tips: all

simplifier:
  option_name: zh_simp

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

symbol_support:
  opencc_config: symbol.json
  option_name: symbol_support
  tips: all

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba  # alphabetï¼šè®¾ç½®æœ¬ speller éœ€è¦ç›‘å¬çš„é”®
  # initials: zyxwvutsrqponmlkjihgfedcba  # initialsï¼šè®¾ç½®å“ªäº›é”®ä»…åœ¨å¼€å¤´çš„æ—¶å€™æ‰éœ€è¦ç›‘å¬
  # finals: ;  # finalsï¼šè®¾ç½®å“ªäº›é”®ä»…åœ¨æœ«å°¾çš„æ—¶å€™æ‰éœ€è¦ç›‘å¬
  delimiter: " '"  #åˆ†è¯ç¬¦
  algebra:  # algebraï¼šRime æ ¸å¿ƒçš„æ‹¼å†™è¿ç®—è§„åˆ™ï¼Œæ‰€æœ‰ algebra ç®—å‡ºçš„è§„åˆ™æœ€åå†™å…¥ prism
    # - erase/^xx$/                      # ç¬¬ä¸€è¡Œä¿ç•™
    # æ¶ˆé™¤ï¼Erasion : è‹¥æ‹¼å¯«èˆ‡<æ¨¡å¼> å®Œå…¨åŒ¹é…ï¼Œå‰‡å°‡è©²æ‹¼å¯«å¾æœ‰æ•ˆæ‹¼å¯«é›†åˆä¸­æ¶ˆé™¤ã€‚
    # æ ¼å¼ï¼šerase/<æ¨¡å¼>/
    # å¯¦ä¾‹ï¼šç®—å¼ erase/^.*\d$/  é‹ç®—å…ƒdang1çµæœ å¸¶è²èª¿çš„æ‹¼éŸ³ä¸å†å¯ç”¨
    
    # æ”¹å¯«æ‹¼å¯«é‹ç®—ï¼Œä½¿å¾—å«è¥¿æ–‡çš„è©å½™ï¼ˆä½æ–¼ Qiao.cn_en.dict.yaml ä¸­ï¼‰ä¸å½±éŸ¿ç°¡æ‹¼åŠŸèƒ½ï¼ˆæ³¨æ„ï¼Œæ­¤åŠŸèƒ½åªé©ç”¨æ–¼å…¨æ‹¼æ‹¼éŸ³ç³»åˆ—æ–¹æ¡ˆï¼Œä¸é©ç”¨æ–¼å„é¡é›™æ‹¼æ–¹æ¡ˆï¼‰
    # åŠ å…¥ä¸­è‹±æ–‡æ··è¾“çš„æ­£åˆ™è¿‡æ»¤ï¼Œæ²¡æœ‰è¿™ä¸ªä¼šå¯¼è‡´è¾“å…¥ã€qqã€ssã€sdã€sfã€‘ç®€æ‹¼å¤±æ•ˆå’Œã€iã€rã€‘å¼€å¤´ç­‰è‹±æ–‡å•è¯è¯ç»„æ— æ³•æ˜¾ç¤º
    # - xform/^([b-df-np-z])$/$1_/
    # - xform/^([b-df-hj-np-tv-z])$/$1_/
    - xform/^_([a-z].*)$/$1/    # æ”¹å¯«æ‹¼å¯«é‹ç®—ä½¿æ‰€æœ‰ã€a-zã€‘26ä¸ªå­—æ¯
    # - abbrev/^([a-z])$/$1_/    # æ”¹å¯«æ‹¼å¯«é‹ç®—ä½¿æ‰€æœ‰ã€a-zã€‘26ä¸ªå­—æ¯
    # - xform/^([r-i-m-e])$/$1_/

    # æ¨¡ç³ŠéŸ³å®šç¾©
    # éœ€è¦å“ªçµ„å°±åˆªå»è¡Œé¦–çš„ # è™Ÿï¼Œå–®é›™å‘ä»»é¸
    - derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
    - derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh

    # åŸºç¡€ï¼ˆç®€æ‹¼ï¼‰
    - abbrev/^([a-z]).+$/$1/
    - abbrev/^([zcs]h).+$/$1/
    # - abbrev/^(.).+$/$1/
          # ç¸®ç•¥ï¼Abbreviation : åŸ·è¡Œæ´¾ç”Ÿé‹ç®—ï¼›æ´¾ç”Ÿå‡ºçš„æ‹¼å¯«å°‡ç²å¾—ã€Œç¸®ç•¥ã€å±¬æ€§ï¼Œæœƒåœ¨éŸ³ç¯€åˆ‡åˆ†æ™‚èˆ‡é€šå¸¸çš„æ‹¼å¯«åšå€åˆ†è™•ç†ã€‚
          # æ ¼å¼ï¼šabbrev/<æ¨¡å¼>/<æ›¿æ›å¼>/
          # å¯¦ä¾‹ï¼šç®—å¼ abbrev/^([a-z]).+$/$1/
          # æ•ˆæœï¼šä»¥é¦–å­—æ¯çˆ²å¤šå­—æ¯éŸ³ç¯€ç¢¼çš„ç¸®å¯«ã€‚

    # è¡¥å…¨
    - derive/([dtngkhrzcs])o(u|ng)$/$1o/   # o = ou; o = ong
    - derive/ong$/on/      # on = ong
    - derive/^ding$/din/     # din = ding

    # å¤„ç† v å’Œ u
    # - derive/^([nl])ue$/$1ve/   # nve = nue; lve = lue
    # - derive/^([jqxy])u/$1v/    # v = u; v = u  æ´¾ç”Ÿï¼šå°†è¾“å…¥juå’Œjvç­‰æ•ˆï¼›å°†è¾“å…¥quå’Œqvç­‰æ•ˆï¼›å°†è¾“å…¥xuå’Œxvç­‰æ•ˆï¼›å°†è¾“å…¥yuå’Œyvç­‰æ•ˆï¼Œæ¬¡å‡ºçš„uå’Œvå‡å¯¹åº”æ‹¼éŸ³ä¸­çš„Ã¼

    # æ™ºèƒ½çº é”™
    - derive/ao$/oa/       # oa = ao
    - derive/([iu])a(o|ng?)$/a$1$2/   # aio = iao; aing = iang; aung = uang
    - derive/([aeiou])ng$/$1gn/   # gn = ng
    - derive/un$/uen/    # uen = un
    - derive/ui$/uei/    # uei = ui
    - derive/iu$/iou/    # iou = ui
    - derive/tie$/tei/    # tei = tie
    - derive/i$/ii/      # ii = i  # i ä¸å°å¿ƒæŒ‰ä¸¤ä¸‹
    - derive/u$/uu/      # ui = u  # u ä¸å°å¿ƒæŒ‰ä¸¤ä¸‹

    # æ‰‹æœºæŒ‰é”®æŒ‰é”™
    - derive/^shi$/ahi/    # ahi = shi
    - derive/^wei$/wwi/    # ahi = shi

    # - derive/^([nl])ve$/$1ue/  # nue = nve, lue = lve 

translator:
  dictionary: Qiao.extended  #Qiao
  prism: Qiao_pinyin
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    # - xform/([jqxy])v/$1u/


key_binder:
  import_preset: default
#   bindings:
#     __patch:
#       - key_bindings:/emacs_editing  # emacs ä¹ æƒ¯
#       - key_bindings:/move_by_word_with_tab  # tab åœ¨å•è¯é—´åˆ‡æ¢
#       - key_bindings:/paging_with_minus_equal  # å‡å·ç­‰å·ç¿»é¡µ
#       - key_bindings:/paging_with_comma_period   # é€—å·å¥å·ç¿»é¡µ
#       - key_bindings:/paging_with_brackets   # ä¸­æ‹¬å·ç¿»é¡µ
#       - clover.key_bindings:/numbered_mode_switch   # Ctrl+Shift+æ•°å­— åˆ‡æ¢å¼€å…³
#       - clover.key_bindings:/windows_compatible_mode_switch   # Windows å…¼å®¹
#       - clover.key_bindings:/kp_enter_is_return   # å°é”®ç›˜å›è½¦è®¾ä¸ºæ™®é€šå›è½¦

ascii_composer:
  import_preset: default
  good_old_caps_lock: true
  switch_key:
    Shift_L: commit_code   # å·¦ Shift åˆ‡æ¢ç›´æ¥ä¸Šå±å­—æ¯
    Shift_R: commit_code   # å³ Shift åˆ‡æ¢ç›´æ¥ä¸Šå±å­—æ¯
    Control_L: noop
    Control_R: noop
    Caps_Lock: noop
    Eisu_toggle: clear

reverse_lookup:
  dictionary: stroke
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”ç­†ç•«ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format:
    - xform/([nl])v/$1Ã¼/

punctuator:
  import_preset: default


recognizer:
  import_preset: default
  patterns:
    email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
    expression: "^=.*$" # å¯ç”¨è®¡ç®—å™¨=å·å¼•å¯¼
    punct: "^/([0-9]0?|[a-z]+)$" # ç‰¹æ®Šç¬¦å·å¼•å¯¼  "^/([0-9]0?|[A-Za-z]+)$"
    reverse_lookup: "`[a-z]*'?$"
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"